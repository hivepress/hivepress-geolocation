hivepress.initGeolocation=function(){!function(e){"use strict";e(document).ready(function(){hivepress.getComponent("location").each(function(){var t=e(this),o=t.find("input[type=text]"),n=t.find("a"),i={details:o.closest("form"),detailsAttribute:"data-coordinate"};t.data("countries")&&(i.componentRestrictions={country:t.data("countries")}),t.data("types")&&(i.types=t.data("types")),o.geocomplete(i),o.on("input",function(){o.val()||t.closest("form").find("input[data-coordinate]").val("")}),navigator.geolocation?n.on("click",function(e){navigator.geolocation.getCurrentPosition(function(e){o.geocomplete("find",e.coords.latitude+" "+e.coords.longitude)}),e.preventDefault()}):n.hide()}),hivepress.getComponent("map").each(function(){var t=e(this),o=!1,n=t.data("max-zoom"),i=[],a=new google.maps.LatLngBounds,r=new google.maps.Map(t.get(0),{zoom:3,minZoom:2,maxZoom:n,mapTypeControl:!1,streetViewControl:!1,center:{lat:0,lng:0},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}),s=new OverlappingMarkerSpiderfier(r,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0});t.height(t.width()),e.each(t.data("markers"),function(e,t){var n=new google.maps.InfoWindow({content:t.content}),c=new google.maps.Marker({title:t.title,position:{lat:t.latitude,lng:t.longitude}});c.addListener("spider_click",function(){o&&o.close(),o=n,n.open(r,c)}),i.push(c),s.addMarker(c),a.extend(c.getPosition())}),r.fitBounds(a);new MarkerClusterer(r,i,{imagePath:hivepressGeolocationData.assetURL+"/images/markerclustererplus/m",maxZoom:n-1})})})}(jQuery)};
