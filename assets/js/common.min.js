hivepress.initGeolocation=function(){!function(t){"use strict";t(document).ready(function(){hivepress.getComponent("location").each(function(){var e=t(this),o=e.find("input[type=text]"),a=e.find("a"),n={details:o.closest("form"),detailsAttribute:"data-coordinate"};e.data("countries")&&(n.componentRestrictions={country:e.data("countries")}),e.data("types")&&(n.types=e.data("types")),o.geocomplete(n),e.data("scatter")&&o.bind("geocode:result",function(e,a){var n=[],i=["route","locality","administrative_area_level_1","administrative_area_level_2","country"];t.each(a.address_components,function(t,e){e.types.filter(function(t){return-1!==i.indexOf(t)}).length&&n.push(e.long_name)}),o.val(n.join(", "))}),o.on("input",function(){o.val()||e.closest("form").find("input[data-coordinate]").val("")}),navigator.geolocation?a.on("click",function(t){navigator.geolocation.getCurrentPosition(function(t){o.geocomplete("find",t.coords.latitude+" "+t.coords.longitude)}),t.preventDefault()}):a.hide()}),hivepress.getComponent("map").each(function(){var e=t(this),o=e.width(),a=!1,n=e.data("max-zoom"),i=[],r=new google.maps.LatLngBounds,s=new google.maps.Map(e.get(0),{zoom:3,minZoom:2,maxZoom:n,mapTypeControl:!1,streetViewControl:!1,center:{lat:0,lng:0},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}),c=new OverlappingMarkerSpiderfier(s,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0}),l={path:google.maps.SymbolPath.CIRCLE,fillColor:"#3a77ff",fillOpacity:.25,strokeColor:"#3a77ff",strokeWeight:1,strokeOpacity:.75,scale:10};e.is("[data-height]")&&(o=e.data("height")),e.height(o),t.each(e.data("markers"),function(t,o){var n=new google.maps.InfoWindow({content:o.content}),d={title:o.title,position:{lat:o.latitude,lng:o.longitude}};e.data("scatter")&&(d.icon=l);var u=new google.maps.Marker(d);u.addListener("spider_click",function(){a&&a.close(),a=n,n.open(s,u)}),i.push(u),c.addMarker(u),r.extend(u.getPosition())}),s.fitBounds(r),new MutationObserver(function(t){s.fitBounds(r)}).observe(e.get(0),{attributes:!0});new MarkerClusterer(s,i,{imagePath:hivepressGeolocationData.assetURL+"/images/markerclustererplus/m",maxZoom:n-1});e.data("scatter")&&s.addListener("zoom_changed",function(){l.scale=Math.pow(1.3125,s.getZoom()),t.each(i,function(t,e){i[t].setIcon(l)})})})})}(jQuery)};
