hivepress.initGeolocation=function(){!function(t){"use strict";t(document).ready(function(){hivepress.getComponent("location").each(function(){var e=t(this),o=e.find("input[type=text]"),a=e.find("a"),n={details:o.closest("form"),detailsAttribute:"data-coordinate"};e.data("countries")&&(n.componentRestrictions={country:e.data("countries")}),e.data("types")&&(n.types=e.data("types")),o.geocomplete(n),e.data("scatter")&&o.bind("geocode:result",function(e,a){var n=[],i=["route","locality","administrative_area_level_1","administrative_area_level_2","country"];t.each(a.address_components,function(t,e){e.types.filter(function(t){return-1!==i.indexOf(t)}).length&&n.push(e.long_name)}),o.val(n.join(", "))}),o.on("input",function(){o.val()||e.closest("form").find("input[data-coordinate]").val("")}),navigator.geolocation?a.on("click",function(t){navigator.geolocation.getCurrentPosition(function(t){o.geocomplete("find",t.coords.latitude+" "+t.coords.longitude)}),t.preventDefault()}):a.hide()}),hivepress.getComponent("map").each(function(){var e=t(this),o=!1,a=e.data("max-zoom"),n=[],i=new google.maps.LatLngBounds,r=new google.maps.Map(e.get(0),{zoom:3,minZoom:2,maxZoom:a,mapTypeControl:!1,streetViewControl:!1,center:{lat:0,lng:0},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}),s=new OverlappingMarkerSpiderfier(r,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0}),c={path:google.maps.SymbolPath.CIRCLE,fillColor:"#3a77ff",fillOpacity:.25,strokeColor:"#3a77ff",strokeWeight:1,strokeOpacity:.75,scale:10};e.height(e.width()),t.each(e.data("markers"),function(t,a){var l=new google.maps.InfoWindow({content:a.content}),d={title:a.title,position:{lat:a.latitude,lng:a.longitude}};e.data("scatter")&&(d.icon=c);var p=new google.maps.Marker(d);p.addListener("spider_click",function(){o&&o.close(),o=l,l.open(r,p)}),n.push(p),s.addMarker(p),i.extend(p.getPosition())}),r.fitBounds(i);new MarkerClusterer(r,n,{imagePath:hivepressGeolocationData.assetURL+"/images/markerclustererplus/m",maxZoom:a-1});e.data("scatter")&&r.addListener("zoom_changed",function(){c.scale=Math.pow(1.3125,r.getZoom()),t.each(n,function(t,e){n[t].setIcon(c)})})})})}(jQuery)};
