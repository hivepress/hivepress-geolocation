hivepress.initGeolocation=function(){(function(a){"use strict";a(document).ready(function(){hivepress.getComponent("location").each(function(){var b=a(this),c=b.closest("form"),d=b.find("input[type=text]"),e=c.find("input[name=_region]"),f=b.find("a"),g={details:c,detailsAttribute:"data-coordinate"};b.data("countries")&&(g.componentRestrictions={country:b.data("countries")}),b.data("types")&&(g.types=b.data("types")),d.geocomplete(g),d.bind("geocode:result",function(c,f){var g=[],h=["locality","administrative_area_level_2","administrative_area_level_1","country"];e.length&&(f.address_components[0].types.filter(a=>h.includes(a)).length?e.val(f.place_id):e.val("")),b.data("scatter")&&(h.push("route"),a.each(f.address_components,function(a,b){b.types.filter(a=>h.includes(a)).length&&g.push(b.long_name)}),d.val(g.join(", ")))}),d.on("input",function(){d.val()||c.find("input[data-coordinate]").val("")}),navigator.geolocation?f.on("click",function(a){navigator.geolocation.getCurrentPosition(function(a){d.geocomplete("find",a.coords.latitude+" "+a.coords.longitude)}),a.preventDefault()}):f.hide()}),hivepress.getComponent("map").each(function(){var b=a(this),c=b.width(),d=!1,e=b.data("max-zoom"),f=[],g=new google.maps.LatLngBounds,h=new google.maps.Map(b.get(0),{zoom:3,minZoom:2,maxZoom:e,mapTypeControl:!1,streetViewControl:!1,center:{lat:0,lng:0},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}),i=new OverlappingMarkerSpiderfier(h,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0}),j={path:google.maps.SymbolPath.CIRCLE,fillColor:"#3a77ff",fillOpacity:.25,strokeColor:"#3a77ff",strokeWeight:1,strokeOpacity:.75,scale:10};b.is("[data-height]")&&(c=b.data("height")),b.height(c),a.each(b.data("markers"),function(a,c){var e=new google.maps.InfoWindow({content:c.content}),k={title:c.title,position:{lat:c.latitude,lng:c.longitude}};b.data("scatter")&&(k.icon=j);var l=new google.maps.Marker(k);l.addListener("spider_click",function(){d&&d.close(),d=e,e.open(h,l)}),f.push(l),i.addMarker(l),g.extend(l.getPosition())}),h.fitBounds(g);var k=new MutationObserver(function(){h.fitBounds(g)});k.observe(b.get(0),{attributes:!0});new MarkerClusterer(h,f,{imagePath:hivepressGeolocationData.assetURL+"/images/markerclustererplus/m",maxZoom:e-1});b.data("scatter")&&h.addListener("zoom_changed",function(){j.scale=Math.pow(1.3125,h.getZoom()),a.each(f,function(a){f[a].setIcon(j)})})})})})(jQuery)};